<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Import MiteMapTools data — import_mitemap • MiteMapTools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Import MiteMapTools data — import_mitemap"><meta name="description" content="This function import data from zip files generated by MiteMap software.
It unzips all zip files in a folder, read the csv files and merge them with
metadata if provided. It also compute some metrics such as speed and turning angle.
By default, it also clean the data using filter_mitemap() with default
parameters. See ?filter_mitemap() for other parameters or set clean to
FALSE if you want raw data. By default the center of the arena is located
at (0,0) with a diameter of 40mm and the source of the odor is located at
c(-20 , 0).
If your zip files or metadata files have parenthesis and space in the name,
you may want to use rename_files_with_number() function before using
this function. The file name in the metadata must match the zip file name,
but import_mitemap() integrate some options to handle parenthesis and space in
the name of the files in the metadata."><meta property="og:description" content="This function import data from zip files generated by MiteMap software.
It unzips all zip files in a folder, read the csv files and merge them with
metadata if provided. It also compute some metrics such as speed and turning angle.
By default, it also clean the data using filter_mitemap() with default
parameters. See ?filter_mitemap() for other parameters or set clean to
FALSE if you want raw data. By default the center of the arena is located
at (0,0) with a diameter of 40mm and the source of the odor is located at
c(-20 , 0).
If your zip files or metadata files have parenthesis and space in the name,
you may want to use rename_files_with_number() function before using
this function. The file name in the metadata must match the zip file name,
but import_mitemap() integrate some options to handle parenthesis and space in
the name of the files in the metadata."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-secondary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MiteMapTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Import MiteMapTools data</h1>

      <div class="d-none name"><code>import_mitemap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function import data from zip files generated by MiteMap software.
It unzips all zip files in a folder, read the csv files and merge them with
metadata if provided. It also compute some metrics such as speed and turning angle.
By default, it also clean the data using <code><a href="filter_mitemap.html">filter_mitemap()</a></code> with default
parameters. See ?<code><a href="filter_mitemap.html">filter_mitemap()</a></code> for other parameters or set <code>clean</code> to
FALSE if you want raw data. By default the center of the arena is located
at (0,0) with a diameter of 40mm and the source of the odor is located at
c(-20 , 0).</p>
<p>If your zip files or metadata files have parenthesis and space in the name,
you may want to use <code><a href="rename_files_with_number.html">rename_files_with_number()</a></code> function before using
this function. The file name in the metadata must match the zip file name,
but <code>import_mitemap()</code> integrate some options to handle parenthesis and space in
the name of the files in the metadata.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">import_mitemap</span><span class="op">(</span></span>
<span>  <span class="va">path_to_folder</span>,</span>
<span>  path_to_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  format_metadata <span class="op">=</span> <span class="st">"csv"</span>,</span>
<span>  clean <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  delete_parenthesis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  replace_parenthesis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  delete_space <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  csv_with_correction <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  remove_csv_folder <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dec <span class="op">=</span> <span class="st">","</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">";"</span>,</span>
<span>  na_readxl <span class="op">=</span> <span class="st">"NA"</span>,</span>
<span>  n_lag <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  center_x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  center_y <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  x_odor <span class="op">=</span> <span class="op">-</span><span class="fl">20</span>,</span>
<span>  y_odor <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return_with_logs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  compute_metrics <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  file_name_column <span class="op">=</span> <span class="st">"File_name"</span>,</span>
<span>  raw_data_name <span class="op">=</span> <span class="st">"donnees_brutes"</span>,</span>
<span>  radius_CH <span class="op">=</span> <span class="fl">23.175</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path-to-folder">path_to_folder<a class="anchor" aria-label="anchor" href="#arg-path-to-folder"></a></dt>
<dd><p>Path to the folder with zip files containing csv
and with one metadata files in the .xlsx format</p></dd>


<dt id="arg-path-to-metadata">path_to_metadata<a class="anchor" aria-label="anchor" href="#arg-path-to-metadata"></a></dt>
<dd><p>Path to the csv file (or xlsx if format_metadata="xlsx").
If there is only one csv file set path_to_metadata="csv" (or "xlsx").
Need to be set using a complete path to csv file if this file is not in
the folder or if their is multiple xlsx/csv files in the folder.</p></dd>


<dt id="arg-format-metadata">format_metadata<a class="anchor" aria-label="anchor" href="#arg-format-metadata"></a></dt>
<dd><p>Either csv or xlsx. If set to NULL, no metadata is used.</p></dd>


<dt id="arg-clean">clean<a class="anchor" aria-label="anchor" href="#arg-clean"></a></dt>
<dd><p>(logical, default TRUE) Do we clean the MiteMap result using
<code><a href="filter_mitemap.html">filter_mitemap()</a></code> function? See <code><a href="filter_mitemap.html">filter_mitemap()</a></code> for additional parameters.</p></dd>


<dt id="arg-delete-parenthesis">delete_parenthesis<a class="anchor" aria-label="anchor" href="#arg-delete-parenthesis"></a></dt>
<dd><p>(Logical, default FALSE) Do we delete parenthesis with a number
inside in the name of the files in the metadata.
Note that the name of the csv inside a zip  file with a parenthesis do not have
parenthesis into this name. Thus, we recommended to
set TRUE at least in one of delete_parenthesis or replace_parenthesis parameter.</p></dd>


<dt id="arg-replace-parenthesis">replace_parenthesis<a class="anchor" aria-label="anchor" href="#arg-replace-parenthesis"></a></dt>
<dd><p>(Logical, default TRUE) Replace abc_name(1) by abc_name_1
in the name of the files in the metadata.</p></dd>


<dt id="arg-delete-space">delete_space<a class="anchor" aria-label="anchor" href="#arg-delete-space"></a></dt>
<dd><p>(Logical, default TRUE) Delete_space in the name of the
files in the metadata.</p></dd>


<dt id="arg-csv-with-correction">csv_with_correction<a class="anchor" aria-label="anchor" href="#arg-csv-with-correction"></a></dt>
<dd><p>(Logical, default FALSE) If TRUE an if present in
the zip files, position files with correction (center and reduce to 0) are used.</p></dd>


<dt id="arg-remove-csv-folder">remove_csv_folder<a class="anchor" aria-label="anchor" href="#arg-remove-csv-folder"></a></dt>
<dd><p>(Logical, default TRUE) If FALSE, the csv_folder is
kept. May be useful for debugging.</p></dd>


<dt id="arg-dec">dec<a class="anchor" aria-label="anchor" href="#arg-dec"></a></dt>
<dd><p>decimal for the csv metadata files.</p></dd>


<dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p>separator for the csv metadata files.</p></dd>


<dt id="arg-n-lag">n_lag<a class="anchor" aria-label="anchor" href="#arg-n-lag"></a></dt>
<dd><p>(int, default 1) Number of time step to compute speed and
turning angle. If n_lag=1 (default), speed and turning angle are computed
between two consecutive time step (0.2s). If n_lag=2 speed and turning angle
are computed between two time step before and two time step after.</p></dd>


<dt id="arg-center-x">center_x<a class="anchor" aria-label="anchor" href="#arg-center-x"></a></dt>
<dd><p>(int, default 0) Center the value of x by additioning center_x mm
to x.mm.</p></dd>


<dt id="arg-center-y">center_y<a class="anchor" aria-label="anchor" href="#arg-center-y"></a></dt>
<dd><p>(int, default 0) Center the value of y by additioning center_y mm
to y.mm.</p></dd>


<dt id="arg-x-odor">x_odor<a class="anchor" aria-label="anchor" href="#arg-x-odor"></a></dt>
<dd><p>(int, default -20) The x position of the odor source.</p></dd>


<dt id="arg-y-odor">y_odor<a class="anchor" aria-label="anchor" href="#arg-y-odor"></a></dt>
<dd><p>(int, default 0) The y position of the odor source.</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p>Force overwriting the path to csv_folder</p></dd>


<dt id="arg-return-with-logs">return_with_logs<a class="anchor" aria-label="anchor" href="#arg-return-with-logs"></a></dt>
<dd><p>(Logical, default FALSE). If TRUE, the returning
object is a list of 4 elements containing useful information to explore
unmatching name between file_names and metadata</p></dd>


<dt id="arg-compute-metrics">compute_metrics<a class="anchor" aria-label="anchor" href="#arg-compute-metrics"></a></dt>
<dd><p>(Logical, default TRUE). Are metrics such as time_immobile,
speed and turning angles are computed for each time step ?</p></dd>


<dt id="arg-file-name-column">file_name_column<a class="anchor" aria-label="anchor" href="#arg-file-name-column"></a></dt>
<dd><p>Name for the column corresponding to the File_name.</p></dd>


<dt id="arg-raw-data-name">raw_data_name<a class="anchor" aria-label="anchor" href="#arg-raw-data-name"></a></dt>
<dd><p>Name of the raw data file in the zip file. Default is
"donnees_brutes" (sorry for the french name). If using code from
<a href="https://github.com/LR69/MiteMap/tree/MiteMap.v6" class="external-link">https://github.com/LR69/MiteMap/tree/MiteMap.v6</a> no need to change this.</p></dd>


<dt id="arg-radius-ch">radius_CH<a class="anchor" aria-label="anchor" href="#arg-radius-ch"></a></dt>
<dd><p>the radius of the circular half arena (in mm). Default is 23.175
to fit with the area of HH shape.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>(logical, default TRUE). If TRUE, print additional information.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other params for be passed on to <code><a href="filter_mitemap.html">filter_mitemap()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>return_with_logs</code> is FALSE (default), the return object is only
the tibble called <code>resulting_data</code>. If <code>return_with_logs</code> is TRUE, it
return a list of 4 elements:</p><ul><li><p><code>resulting_data</code>: a (possibly huge) tibble with metadata information and position in
x, y and time.</p></li>
<li><p><code>files_not_in_csv</code>: a list of files not present in csv filenames from zip files.</p></li>
<li><p><code>files_not_in_metada</code>: a list of files not funded in metadata.</p></li>
<li><p><code>duplicate_file_name_in_metadata</code>: a list of duplicated file names in metadata.</p></li>
</ul><p>By default, the <code>resulting_data</code> slot is structured in 4 obligated columns + columns from
the metadata file + the computed metrics if compute_metrics is TRUE.</p><ul><li><p><code>File_name</code></p></li>
<li><p><code>X..t.s.</code> - The time in second (position is recorded every 0.2s)</p></li>
<li><p><code>x.mm.</code> - The position in x (in mm)</p></li>
<li><p><code>y.mm.</code> - The position in y (in mm)</p></li>
<li><p>Metadata columns</p></li>
<li><p>Computed metrics</p><ul><li><p><code>distance</code> - distance between two consecutive time step (in mm)</p></li>
<li><p><code>speed_mm_s</code> - speed between two consecutive time step (in mm/s)</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Adrien Taudière</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">mm_csv</span> <span class="op">&lt;-</span> <span class="fu">import_mitemap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"mitemap_example"</span>, package <span class="op">=</span> <span class="st">"MiteMapTools"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  file_name_column <span class="op">=</span> <span class="st">"File (mite ID)"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mm_csv</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 70828    35</span>
<span class="r-in"><span><span class="va">mm_csv</span><span class="op">$</span><span class="va">File_name</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 50</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mm_csv2</span> <span class="op">&lt;-</span> <span class="fu">import_mitemap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"mitemap_example"</span>, package <span class="op">=</span> <span class="st">"MiteMapTools"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  file_name_column <span class="op">=</span> <span class="st">"File (mite ID)"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, return_with_logs <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mm_csv2</span><span class="op">$</span><span class="va">files_not_in_csv</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "MM032020_10_24_22h23m12s"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">mm_csv2</span><span class="op">$</span><span class="va">files_not_in_csv</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1390</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mm_csv_unfiltered</span> <span class="op">&lt;-</span> <span class="fu">import_mitemap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"mitemap_example"</span>, package <span class="op">=</span> <span class="st">"MiteMapTools"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  file_name_column <span class="op">=</span> <span class="st">"File (mite ID)"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, clean <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mm_csv_unfiltered</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 76032    35</span>
<span class="r-in"><span><span class="va">mm_csv_unfiltered</span><span class="op">$</span><span class="va">File_name</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 53</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mm_xlsx</span> <span class="op">&lt;-</span> <span class="fu">import_mitemap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"mitemap_example"</span>, package <span class="op">=</span> <span class="st">"MiteMapTools"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  format_metadata <span class="op">=</span> <span class="st">"xlsx"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mm_xlsx</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 70828    35</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mm_wo_metadata</span> <span class="op">&lt;-</span> <span class="fu">import_mitemap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"mitemap_example"</span>, package <span class="op">=</span> <span class="st">"MiteMapTools"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  format_metadata <span class="op">=</span> <span class="cn">NULL</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">mm_wo_metadata</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 72257    16</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/adrientaudiere" class="external-link">Adrien Taudière</a>, <a href="https://orcid.org/0000-0001-8833-1717" class="external-link">Lise Roy</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

